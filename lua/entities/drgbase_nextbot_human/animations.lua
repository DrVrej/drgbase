
ENT.RunAnimations = {
  ["normal"] = ACT_HL2MP_RUN,
  ["ar2"] = ACT_HL2MP_RUN_AR2,
  ["camera"] = ACT_HL2MP_RUN_CAMERA,
  ["crossbow"] = ACT_HL2MP_RUN_CROSSBOW,
  ["duel"] = ACT_HL2MP_RUN_DUEL,
  ["fist"] = ACT_HL2MP_RUN_FIST,
  ["knife"] = ACT_HL2MP_RUN_KNIFE,
  ["magic"] = ACT_HL2MP_RUN_MAGIC,
  ["melee2"] = ACT_HL2MP_RUN_MELEE2,
  ["passive"] = ACT_HL2MP_RUN_PASSIVE,
  ["physgun"] = ACT_HL2MP_RUN_PHYSGUN,
  ["revolver"] = ACT_HL2MP_RUN_REVOLVER,
  ["rpg"] = ACT_HL2MP_RUN_RPG,
  ["shotgun"] = ACT_HL2MP_RUN_SHOTGUN,
  ["smg"] = ACT_HL2MP_RUN_SMG1,
  ["grenade"] = ACT_HL2MP_RUN_GRENADE,
  ["melee"] = ACT_HL2MP_RUN_MELEE,
  ["pistol"] = ACT_HL2MP_RUN_PISTOL,
  ["slam"] = ACT_HL2MP_RUN_SLAM
}

ENT.WalkAnimations = {
  ["normal"] = ACT_HL2MP_WALK,
  ["ar2"] = ACT_HL2MP_WALK_AR2,
  ["camera"] = ACT_HL2MP_WALK_CAMERA,
  ["crossbow"] = ACT_HL2MP_WALK_CROSSBOW,
  ["duel"] = ACT_HL2MP_WALK_DUEL,
  ["fist"] = ACT_HL2MP_WALK_FIST,
  ["knife"] = ACT_HL2MP_WALK_KNIFE,
  ["magic"] = ACT_HL2MP_WALK_MAGIC,
  ["melee2"] = ACT_HL2MP_WALK_MELEE2,
  ["passive"] = ACT_HL2MP_WALK_PASSIVE,
  ["physgun"] = ACT_HL2MP_WALK_PHYSGUN,
  ["revolver"] = ACT_HL2MP_WALK_REVOLVER,
  ["rpg"] = ACT_HL2MP_WALK_RPG,
  ["shotgun"] = ACT_HL2MP_WALK_SHOTGUN,
  ["smg"] = ACT_HL2MP_WALK_SMG1,
  ["grenade"] = ACT_HL2MP_WALK_GRENADE,
  ["melee"] = ACT_HL2MP_WALK_MELEE,
  ["pistol"] = ACT_HL2MP_WALK_PISTOL,
  ["slam"] = ACT_HL2MP_WALK_SLAM
}

ENT.CrouchWalkAnimations = {
  ["normal"] = ACT_HL2MP_WALK_CROUCH,
  ["ar2"] = ACT_HL2MP_WALK_CROUCH_AR2,
  ["camera"] = ACT_HL2MP_WALK_CROUCH_CAMERA,
  ["crossbow"] = ACT_HL2MP_WALK_CROUCH_CROSSBOW,
  ["duel"] = ACT_HL2MP_WALK_CROUCH_DUEL,
  ["fist"] = ACT_HL2MP_WALK_CROUCH_FIST,
  ["knife"] = ACT_HL2MP_WALK_CROUCH_KNIFE,
  ["magic"] = ACT_HL2MP_WALK_CROUCH_MAGIC,
  ["melee2"] = ACT_HL2MP_WALK_CROUCH_MELEE2,
  ["passive"] = ACT_HL2MP_WALK_CROUCH_PASSIVE,
  ["physgun"] = ACT_HL2MP_WALK_CROUCH_PHYSGUN,
  ["revolver"] = ACT_HL2MP_WALK_CROUCH_REVOLVER,
  ["rpg"] = ACT_HL2MP_WALK_CROUCH_RPG,
  ["shotgun"] = ACT_HL2MP_WALK_CROUCH_SHOTGUN,
  ["smg"] = ACT_HL2MP_WALK_CROUCH_SMG1,
  ["grenade"] = ACT_HL2MP_WALK_CROUCH_GRENADE,
  ["melee"] = ACT_HL2MP_WALK_CROUCH_MELEE,
  ["pistol"] = ACT_HL2MP_WALK_CROUCH_PISTOL,
  ["slam"] = ACT_HL2MP_WALK_CROUCH_SLAM
}

ENT.IdleAnimations = {
  ["normal"] = ACT_HL2MP_IDLE,
  ["ar2"] = ACT_HL2MP_IDLE_AR2,
  ["camera"] = ACT_HL2MP_IDLE_CAMERA,
  ["crossbow"] = ACT_HL2MP_IDLE_CROSSBOW,
  ["duel"] = ACT_HL2MP_IDLE_DUEL,
  ["fist"] = ACT_HL2MP_IDLE_FIST,
  ["knife"] = ACT_HL2MP_IDLE_KNIFE,
  ["magic"] = ACT_HL2MP_IDLE_MAGIC,
  ["melee2"] = ACT_HL2MP_IDLE_MELEE2,
  ["passive"] = ACT_HL2MP_IDLE_PASSIVE,
  ["physgun"] = ACT_HL2MP_IDLE_PHYSGUN,
  ["revolver"] = ACT_HL2MP_IDLE_REVOLVER,
  ["rpg"] = ACT_HL2MP_IDLE_RPG,
  ["shotgun"] = ACT_HL2MP_IDLE_SHOTGUN,
  ["smg"] = ACT_HL2MP_IDLE_SMG1,
  ["grenade"] = ACT_HL2MP_IDLE_GRENADE,
  ["melee"] = ACT_HL2MP_IDLE_MELEE,
  ["pistol"] = ACT_HL2MP_IDLE_PISTOL,
  ["slam"] = ACT_HL2MP_IDLE_SLAM
}

ENT.CrouchIdleAnimations = {
  ["normal"] = ACT_HL2MP_IDLE_CROUCH,
  ["ar2"] = ACT_HL2MP_IDLE_CROUCH_AR2,
  ["camera"] = ACT_HL2MP_IDLE_CROUCH_CAMERA,
  ["crossbow"] = ACT_HL2MP_IDLE_CROUCH_CROSSBOW,
  ["duel"] = ACT_HL2MP_IDLE_CROUCH_DUEL,
  ["fist"] = ACT_HL2MP_IDLE_CROUCH_FIST,
  ["knife"] = ACT_HL2MP_IDLE_CROUCH_KNIFE,
  ["magic"] = ACT_HL2MP_IDLE_CROUCH_MAGIC,
  ["melee2"] = ACT_HL2MP_IDLE_CROUCH_MELEE2,
  ["passive"] = ACT_HL2MP_IDLE_CROUCH_PASSIVE,
  ["physgun"] = ACT_HL2MP_IDLE_CROUCH_PHYSGUN,
  ["revolver"] = ACT_HL2MP_IDLE_CROUCH_REVOLVER,
  ["rpg"] = ACT_HL2MP_IDLE_CROUCH_RPG,
  ["shotgun"] = ACT_HL2MP_IDLE_CROUCH_SHOTGUN,
  ["smg"] = ACT_HL2MP_IDLE_CROUCH_SMG1,
  ["grenade"] = ACT_HL2MP_IDLE_CROUCH_GRENADE,
  ["melee"] = ACT_HL2MP_IDLE_CROUCH_MELEE,
  ["pistol"] = ACT_HL2MP_IDLE_CROUCH_PISTOL,
  ["slam"] = ACT_HL2MP_IDLE_CROUCH_SLAM
}

ENT.JumpAnimations = {
  ["normal"] = ACT_HL2MP_JUMP_KNIFE,
  ["ar2"] = ACT_HL2MP_JUMP_AR2,
  ["camera"] = ACT_HL2MP_JUMP_CAMERA,
  ["crossbow"] = ACT_HL2MP_JUMP_CROSSBOW,
  ["duel"] = ACT_HL2MP_JUMP_DUEL,
  ["fist"] = ACT_HL2MP_JUMP_FIST,
  ["knife"] = ACT_HL2MP_JUMP_KNIFE,
  ["magic"] = ACT_HL2MP_JUMP_MAGIC,
  ["melee2"] = ACT_HL2MP_JUMP_MELEE2,
  ["passive"] = ACT_HL2MP_JUMP_PASSIVE,
  ["physgun"] = ACT_HL2MP_JUMP_PHYSGUN,
  ["revolver"] = ACT_HL2MP_JUMP_REVOLVER,
  ["rpg"] = ACT_HL2MP_JUMP_RPG,
  ["shotgun"] = ACT_HL2MP_JUMP_SHOTGUN,
  ["smg"] = ACT_HL2MP_JUMP_SMG1,
  ["grenade"] = ACT_HL2MP_JUMP_GRENADE,
  ["melee"] = ACT_HL2MP_JUMP_MELEE,
  ["pistol"] = ACT_HL2MP_JUMP_PISTOL,
  ["slam"] = ACT_HL2MP_JUMP_SLAM
}

if SERVER then

  -- Functions --

  function ENT:LookAt(pos)
    self:DirectPoseParametersAt(pos, "head_pitch", "head_yaw", self:EyePos())
  end
  function ENT:AimAt(pos)
    self:DirectPoseParametersAt(pos, "aim_pitch", "aim_yaw", self:GetShootPos())
  end

  -- Hooks --

  local passives = {
    ["ar2"] = true,
    ["smg"] = true,
    ["shotgun"] = true
  }
  local normals = {
    ["pistol"] = true,
    ["revolver"] = true,
    ["melee"] = true,
    ["fist"] = true,
    ["knife"] = true,
    ["duel"] = true
  }
  function ENT:UpdateAnimation()
    if self:IsClimbingUp() then return self.ClimbUpAnimation, self.ClimbAnimRate end
    if self:IsClimbingDown() then return self.ClimbDownAnimation, self.ClimbAnimRate end
    local holdtype = self:HasWeapon() and self:GetWeapon():GetHoldType() or "normal"
    if self:IsWeaponHolstered() then
      if passives[holdtype] then holdtype = "passive"
      elseif normals[holdtype] then holdtype = "normal" end
    end
    if not self:IsOnGround() then
      return self.JumpAnimations[holdtype], self.JumpAnimRate
    elseif self:IsCrouching() then
      if self:IsMoving() then return self.CrouchWalkAnimations[holdtype], self.CrouchWalkAnimRate
      else return self.CrouchIdleAnimations[holdtype], self.CrouchIdleAnimRate end
    elseif self:IsRunning() then return self.RunAnimations[holdtype], self.RunAnimRate
    elseif self:IsMoving() then return self.WalkAnimations[holdtype], self.WalkAnimRate
    else return self.IdleAnimations[holdtype], self.IdleAnimRate end
  end

end
